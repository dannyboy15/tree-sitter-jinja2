==================
parses a jinja expression
==================

select * from table
{% if(True) call_function() %}
select * from other_table

---

(source_file
  (text)
  (statement
    (jinja_expression)
  )
  (text)
)

==================
ignores valid syntax in a jinja expression
==================

{% ref('my_table') %}

---

(source_file
  (statement
    (jinja_expression)
  )
  (text)
)

==================
finds nested jinja expression
==================

{{ config(key='value') }}
with
something as (
  select whatever from {{ ref('my_table') }}
  where {% is_incremental() %} and my_bool
),
other as (
  more sql
)

---

(source_file
  (expression
    (function
      (identifier)
      (argument_list
        (kwarg
          (identifier)
          (string
            (single_quote)
            (string_content_sq)
          )
        )
      )
    )
  )
  (text)
  (expression
    (function
      (identifier)
      (argument_list
        (string
          (single_quote)
          (string_content_sq)
        )
      )
    )
  )
  (text)
  (statement
    (jinja_expression)
  )
  (text)
)

==================
jinja expression recognized over multiple line breaks
==================

{%
expression
%}

---

(source_file
  (statement
    (jinja_expression)
  )
  (text)
)

==================
not a jinja expression
==================

{%}

---

(source_file
  (ERROR)
)
